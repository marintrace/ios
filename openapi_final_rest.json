{"openapi":"3.0.2","info":{"title":"Contact Tracing API","description":"API for asynchronous and synchronous calls from contact tracing clients","version":"0.1.0"},"paths":{"/health":{"get":{"tags":["Mgmt"],"summary":"Health Check","description":"Health check","operationId":"healthcheck","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Health Check Health Get","type":"string"}}}}}}},"/report-interaction":{"post":{"tags":["Async"],"summary":"Queue Interaction Report","description":"Log contact  between a user and multiple users","operationId":"queue_interaction_report","parameters":[{"required":true,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InteractionReport"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatedAsyncTask"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/report-health":{"post":{"tags":["Async"],"summary":"Queue Health Report","description":"Log health report under the specified user","operationId":"queue_health_report","parameters":[{"required":true,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthReport"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatedAsyncTask"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/set-active-user":{"post":{"tags":["Async"],"summary":"Set Active User","description":"Notify the system that a user has logged in for the first time","operationId":"queue_set_active_user","parameters":[{"required":true,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatedAsyncTask"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/list/users":{"get":{"tags":["Sync"],"summary":"List Users","description":"List the users from a specified school (no PII)","operationId":"list_users","parameters":[{"required":true,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListUsersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user-status":{"get":{"tags":["Sync"],"summary":"User Healthy","description":"Get a user's current health status","operationId":"user_status","parameters":[{"required":true,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRiskItem"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CreatedAsyncTask":{"title":"CreatedAsyncTask","required":["task_id"],"type":"object","properties":{"timestamp":{"title":"Timestamp","type":"integer","default":1601088808},"status":{"title":"Status","enum":["MALFORMED","UNEXPECTED","SUCCESS","QUEUED","ACCESS_DENIED"],"type":"string","default":"QUEUED"},"task_id":{"title":"Task Id","type":"string"}},"description":"Created Asynchronous task with service"},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"HealthReport":{"title":"HealthReport","type":"object","properties":{"timestamp":{"title":"Timestamp","type":"integer","default":1601088808},"num_symptoms":{"title":"Num Symptoms","type":"integer","default":0},"proximity":{"title":"Proximity","type":"boolean","default":false},"test_type":{"title":"Test Type","enum":["positive","negative"],"type":"string"},"commercial_flight":{"title":"Commercial Flight","type":"boolean","default":false}},"description":"Symptom Report"},"InteractionReport":{"title":"InteractionReport","required":["targets"],"type":"object","properties":{"targets":{"title":"Targets","type":"array","items":{"type":"string"}}},"description":"Interaction report schema for API validation and documentation"},"ListUsersResponse":{"title":"ListUsersResponse","required":["users"],"type":"object","properties":{"timestamp":{"title":"Timestamp","type":"integer","default":1601088808},"status":{"title":"Status","enum":["MALFORMED","UNEXPECTED","SUCCESS","QUEUED","ACCESS_DENIED"],"type":"string","default":"SUCCESS"},"users":{"title":"Users","type":"array","items":{"$ref":"#/components/schemas/User"}}},"description":"Listing users in the database response"},"User":{"title":"User","required":["first_name","last_name","email","school"],"type":"object","properties":{"first_name":{"title":"First Name","type":"string"},"last_name":{"title":"Last Name","type":"string"},"email":{"title":"Email","type":"string"},"school":{"title":"School","type":"string"},"status":{"title":"Status","enum":["inactive","active"],"type":"string"}},"description":"User Schema for API validation and documentation"},"UserRiskItem":{"title":"UserRiskItem","type":"object","properties":{"email":{"title":"Email","type":"string"},"timestamp":{"title":"Timestamp","type":"string"},"color":{"title":"Color","type":"string"},"criteria":{"title":"Criteria","type":"array","items":{"type":"string"},"default":[]}},"description":"Entity representing user risk"},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}}}}